# TODAY/Calendar UI刷新案

最終更新: 2025-09-26 by nakayama

## 目的
- PLAN/REVIEW の状態をひと目で把握できる視覚的手がかりを強化する。
- 推奨（提案）コンテンツを「アプリからの助言」として受け取りやすい演出に刷新する。
- 連続達成日数や気分の推移を、達成感と遊び心を伴って提示し、モチベーションを維持させる。
- "依存症を楽しんでなおす" というプロダクトトーンに合った、モダンで人間工学的なUIガイドラインを用意する。

## 現状課題の整理
- ファーストビューに情報が詰まり過ぎており、本来入力したい「今夜のプラン」が視界に入るまでスクロールが必要。
- PLAN/REVIEW ステップ表示やステータスピルなど補助UIが多く、夜間に素早く判断したい場面でノイズになっている。
- ゲーミフィケーション（連続達成バナー／次の称号まであと◯日など）が最上段に固定されており、モチベーションよりも視界の妨げになっている。
- リコメンドカードが静的な文言のまま残っており、体験価値を提供できていない。
- Calendar が日曜始まりで配置されているため、週頭を月曜に揃えたいユーザーに違和感がある。
- 自分の候補チップを削除する手段がなく、候補が増えるほど操作性が落ちる。

## 改善方針
### ファーストビューの再構成
- 画面最上段には「現在の日付・時刻」と、ユーザーが登録した“ありがてえ言葉”をランダム表示する簡潔なブロックのみ配置する。
- 連続達成数や称号バッジなどのゲーミフィケーション要素は画面最下部にまとめ、ファーストビューからは退避。
- PLAN/REVIEW のモードバナー・ステップ表示・ステータスピルなど補助UIは一旦撤去し、必要最低限の導線だけ残す。
- 通知やレビュー判定などの状態変化は後段の実装で別途演出（トースト等）に置き換える。

### プラン入力エリアの中心化
- 「今夜は何をする？」ラベルとテキストエリアをファーストビュー中央にフル幅で配置し、余計なカードを置かない。
- プレースホルダー／サンプル文は複数パターンを持ち、夜の誘惑回避に直結する行動をランダム表示する。
- 推奨カード（固定テキスト）は廃止し、将来の動的レコメンド実装まで一旦出さない。

### 自分の候補チップの扱い
- チップはシンプルな pill 表現に揃える。
- モバイルでは長押しで削除ダイアログを表示する仕様とし、デスクトップ操作では `Option/Alt + click` など替わりの操作を提示する。
- 候補を追加する入力欄はテキストエリア直下に配置し、追加後は自動でクリアする。

### ありがてえ言葉（自己励ましメッセージ）
- ユーザーが任意件数登録できるメッセージリストを Settings で管理する。
- 入力UIは7.5行分のテキストエリアとし、改行ごとに1メッセージとして扱う。行数は最大60行までで、超過時は保存できないようバリデーションする。
- テキストエリアは空行もカウント対象。保存時に行末の空白を削除し、空行は自動的に除外する。
- アプリ起動時やタブ復帰時にランダムで1件を選び、`Stop Midnight` ロゴ直下に表示する（本運用時はブランドロゴの下に来る想定）。
- 設定が空の場合はプリセット（理性的な自分からの手紙）をランダム表示する。
- アプリ起動時はカラーグラデーション背景のオープニング画面を挟み（毎回ランダムな配色を生成）、中央でありがてえ言葉を1秒あたり約12文字のペースでタイピング表示。全文が表示されたのち2秒待機し、フェードアウトして通常画面へ遷移する。

### Calendar の体験
- グリッドは月曜始まりに変更し、曜日ラベルの強調色も更新する。
- 気分指標やステータスアイコンの基本方針（色分け・未レビュー表示）は既存のまま維持するが、余白と判別性を改善する。

### トーン＆マナー
- 夜時間の安らぎと勝利体験の両立を目指し、ダークベース+温かみのあるアクセントカラーで統一。
- モーションは「深呼吸のような緩さ」を意識し、急激な動きは避ける。
- テキストはNoto Sans JPのウェイト差を活かし、重要箇所は太字＋大きめサイズ、補足は小さめでコントラストを下げる。
- ダブルタップでのズームを防ぐため、ビューポート設定を固定し、意図しない拡大を抑止する。

## 実装メモ
- `frontend/stop-midnight-app/src/main.ts` の状態管理ロジックは維持しつつ、UI層をコンポーネント化する検討が必要。
- アニメーションはCSSカスタムプロパティで制御し、好みに応じてON/OFFできる設定余地を残す。
- Calendar の色分けはアクセシビリティを考慮し、コントラスト比 3:1 以上を目標とする。

## 追加で詰める事項
1. PC環境でのチップ削除操作（長押しできない場合の挙動）をどうガイドするか。
2. PLAN入力フォームの高さ・フォントサイズなど、夜間利用時に読みやすい最適値。
3. ゲーミフィケーション要素の新しい表示場所（例: TODAYカード末尾 or Settingタブ等）。
4. オープニング画面のアニメーション強度（タイピング速度、フェード時間）をユーザー設定に反映するかどうか。

## 次アクション案
- 上記仕様をもとにワイヤーフレームをアップデートし、ファーストビューの情報量を確認。
- Settings 画面に「ありがてえ言葉」リスト編集UIを追加するタスクを起票。
- TODAY画面実装を段階的に改修するタスク群（レイアウト刷新、ランダムメッセージ、チップ削除、カレンダー週始め変更など）を分割し、コミット単位で進める。
